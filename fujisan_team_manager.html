<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>頂（Itadaki）- 富士山登頂準備</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🗻 頂（Itadaki）</div>
            <div>富士山登頂準備・チーム管理システム（完全版）</div>
        </div>

        <div class="tabs" id="tabButtons">
            <button class="tab active" data-tab="dashboard">📊 ダッシュボード</button>
            <button class="tab" data-tab="members">👥 メンバー</button>
            <button class="tab" data-tab="safety">🏥 安全管理</button>
            <button class="tab" data-tab="gear">🎒 装備度チェック</button>
            <button class="tab" data-tab="experience">⛰️ 登山記録</button>
            <button class="tab" data-tab="plan">🗓️ 登頂計画</button>
        </div>

        <div class="content">
            <div id="dashboard" class="tab-content active">
                <h2>📊 チーム状況</h2>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <div id="teamNameDisplay" style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 0.9em; color: #666; margin-bottom: 5px;">チーム名</div>
                            <div id="teamNameText" style="font-size: 1.5em; font-weight: bold; color: #764ba2;">富士山登頂チーム</div>
                        </div>
                        <button class="btn" id="editTeamNameBtn">✏️ 編集</button>
                    </div>
                    <div id="teamNameEdit" style="display: none; margin-top: 15px;">
                        <input type="text" id="teamNameInput" style="width: 100%; padding: 10px; border: 2px solid #764ba2; border-radius: 8px; font-size: 16px; margin-bottom: 10px;">
                        <div>
                            <button class="btn" id="saveTeamNameBtn">保存</button>
                            <button class="btn btn-secondary" id="cancelTeamNameBtn">キャンセル</button>
                        </div>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="memberCount">0名</div>
                    <div>登録メンバー数</div>
                </div>
                <h3 style="margin-top: 20px;">📋 準備度詳細</h3>
                <div id="memberPreparationList" style="margin-bottom: 20px;"></div>
            </div>

            <div id="members" class="tab-content">
                <h2>👥 メンバー登録</h2>
                <div id="memberForm">
                    <div class="form-group">
                        <label>氏名 *</label>
                        <input type="text" id="memberName" placeholder="山田太郎">
                    </div>
                    <div class="form-group">
                        <label>年齢</label>
                        <input type="number" id="memberAge" min="1" max="100" placeholder="30">
                    </div>
                    <div class="form-group">
                        <label>登山経験</label>
                        <select id="memberExperience">
                            <option value="初心者">初心者</option>
                            <option value="中級者">中級者</option>
                            <option value="上級者">上級者</option>
                        </select>
                    </div>
                    <button type="button" class="btn" id="addMemberBtn">➕ メンバー追加</button>
                </div>
                <h3 style="margin-top: 30px;">📋 メンバー一覧</h3>
                <div id="memberList"></div>
            </div>

            <div id="safety" class="tab-content">
                <h2>🏥 安全管理</h2>
                <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">📝 本日の体調記録</h3>
                    <div id="healthForm">
                        <div class="form-group">
                            <label>メンバー選択</label>
                            <select id="healthMember"><option value="">メンバーを選択してください</option></select>
                        </div>
                        <div class="form-group">
                            <label>体調（5段階）</label>
                            <select id="healthCondition">
                                <option value="5">5 - とても良い</option>
                                <option value="4">4 - 良い</option>
                                <option value="3" selected>3 - 普通</option>
                                <option value="2">2 - やや不調</option>
                                <option value="1">1 - 不調</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>睡眠時間</label>
                            <input type="number" id="sleepHours" min="0" max="24" step="0.5" placeholder="7.5">
                        </div>
                        <div class="form-group">
                            <label>疲労度（5段階）</label>
                            <select id="fatigueLevel">
                                <option value="1" selected>1 - 疲れていない</option>
                                <option value="2">2 - 少し疲れ</option>
                                <option value="3">3 - 普通</option>
                                <option value="4">4 - 疲れている</option>
                                <option value="5">5 - とても疲れている</option>
                            </select>
                        </div>
                        <button type="button" class="btn" id="recordHealthBtn">💾 体調記録を保存</button>
                        <button type="button" class="btn btn-info" id="showHealthHistoryBtn">📊 履歴表示</button>
                        <button type="button" class="btn btn-secondary" id="clearHealthFormBtn">🔄 入力クリア</button>
                    </div>
                </div>
                <div style="background: #f8d7da; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">⚠️ 高山病リスク評価</h3>
                    <div id="riskAssessment"></div>
                </div>
                <div style="background: #d1ecf1; padding: 20px; border-radius: 10px;">
                    <h3 style="margin-top: 0;">🆘 緊急時の連絡先</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 10px;">
                        <div>📞 救急: 119</div>
                        <div>🏥 富士山救護所: 0555-72-1355</div>
                        <div>🚔 富士吉田警察署: 0555-22-0110</div>
                        <div>⛰️ 山岳遭難救助: 110</div>
                    </div>
                </div>
            </div>

            <div id="gear" class="tab-content">
                <h2>🎒 装備度チェック</h2>
                <div style="background: #e7f3ff; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">🎒 装備チェックリスト</h3>
                    <div class="form-group">
                        <label>メンバー選択</label>
                        <select id="gearMember"><option value="">メンバーを選択してください</option></select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <button class="btn" data-gear-category="essential">🔴 必須装備</button>
                        <button class="btn btn-warning" data-gear-category="recommended">🟡 推奨装備</button>
                        <button class="btn btn-info" data-gear-category="seasonal">🔵 季節装備</button>
                        <button class="btn btn-danger" id="clearAllGearBtn" style="float: right;">❌ 全解除</button>
                    </div>
                    <div id="gearChecklist"></div>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-success" id="showMemberGearSummaryBtn" style="margin-right: 10px;">📊 全メンバーの装備状況</button>
                        <button class="btn btn-info" id="exportGearChecklistBtn">📤 装備リスト出力</button>
                    </div>
                    <div id="gearSummaryArea" style="margin-top: 20px;"></div>
                </div>
            </div>

            

            <div id="experience" class="tab-content">
                <h2>⛰️ 登山記録</h2>
                <div style="background: #d4edda; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">🏔️ 山名登録</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 15px; align-items: end;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label>山名</label>
                            <input type="text" id="newMountainName" placeholder="高尾山">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label>標高（m）</label>
                            <input type="number" id="newMountainElevation" min="0" max="4000" placeholder="599">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label>距離（km）</label>
                            <input type="number" id="newMountainDistance" step="0.1" min="0" max="50" placeholder="6.5">
                        </div>
                        <div>
                            <button class="btn" id="addMountainBtn">🏔️ 山を登録</button>
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-info" id="showMountainListBtn">📋 登録済み山一覧</button>
                        <button class="btn btn-danger" id="clearAllMountainsBtn">🗑️ 全山削除</button>
                    </div>
                    <div id="mountainListArea" style="margin-top: 20px;"></div>
                </div>
                
                <div style="background: #fff3cd; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">📝 新しい登山記録を追加</h3>
                    <div class="form-group">
                        <label>メンバー選択</label>
                        <select id="hikingMember"><option value="">メンバーを選択してください</option></select>
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label>山名</label>
                            <select id="mountainSelect"><option value="">登録済みの山から選択</option></select>
                            <input type="text" id="mountainName" placeholder="または直接入力" style="margin-top: 5px;">
                        </div>
                        <div class="form-group"><label>標高差（m）</label><input type="number" id="elevationGain" min="0" max="4000" placeholder="500"></div>
                        <div class="form-group"><label>距離（km）</label><input type="number" id="hikingDistance" step="0.1" min="0" max="50" placeholder="6.5"></div>
                        <div class="form-group">
                            <label>難易度</label>
                            <select id="hikingDifficulty">
                                <option value="初級">初級（ハイキング）</option>
                                <option value="中級">中級（本格登山）</option>
                                <option value="上級">上級（難易度高）</option>
                            </select>
                        </div>
                        <div class="form-group"><label>登山日</label><input type="date" id="hikingDate"></div>
                        <div class="form-group">
                            <label>天候</label>
                            <select id="weather">
                                <option value="晴れ">晴れ</option><option value="曇り">曇り</option><option value="雨">雨</option><option value="雪">雪</option><option value="霧">霧</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>メモ・感想</label>
                        <textarea id="hikingNotes" rows="3" placeholder="登山の感想や注意点など..."></textarea>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn" id="recordHikingBtn">💾 登山記録を保存</button>
                        <button class="btn btn-secondary" id="clearHikingFormBtn">🔄 フォームクリア</button>
                        <button class="btn btn-info" id="showAllHikingRecordsBtn">📊 全記録表示</button>
                        <button class="btn btn-danger" id="clearHikingRecordsBtn">🗑️ 全記録削除</button>
                    </div>
                </div>

                <div style="background: #e7f3ff; padding: 20px; border-radius: 10px;">
                    <h3 style="margin-top: 0;">📋 登山記録一覧</h3>
                    <div id="hikingHistory"></div>
                </div>
            </div>

            <div id="plan" class="tab-content">
                <h2>🗓️ 登頂計画</h2>
                <div style="background: #eef6ff; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>富士山登頂予定日</label>
                        <input type="date" id="planDate">
                    </div>
                    <div class="form-group">
                        <label>山小屋</label>
                        <input type="text" id="planHut" placeholder="例: ○○山荘">
                    </div>
                    <div class="form-group" style="display: grid; grid-template-columns: 140px 1fr auto; gap: 10px; align-items: end;">
                        <div>
                            <label>時刻</label>
                            <input type="time" id="planTime" step="900">
                        </div>
                        <div>
                            <label>アクティビティ</label>
                            <input type="text" id="planActivity" placeholder="集合、登山開始、ご来光 など">
                        </div>
                        <div>
                            <button class="btn" id="addPlanEntryBtn">➕ 追加</button>
                        </div>
                    </div>
                    <div style="margin-top: 10px;">
                        <button class="btn btn-secondary" id="clearPlanBtn">🔄 クリア</button>
                        <button class="btn btn-info" id="exportPlanBtn">📤 計画を出力</button>
                    </div>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h3 style="margin-top: 0;">🕒 スケジュール</h3>
                    <div id="planScheduleList"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <div id="confirmModal" class="modal-overlay">
        <div class="confirm-dialog">
            <div id="confirmMessage" style="margin-bottom: 25px; line-height: 1.5;"></div>
            <div>
                <button class="btn btn-secondary" id="confirmCancelBtn">キャンセル</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">削除する</button>
            </div>
        </div>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>