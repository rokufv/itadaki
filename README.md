# 頂（Itadaki）- 富士山登頂準備・チーム管理（プライベートWebアプリ）

ブラウザだけで動く、富士山登頂準備のチームマネジメント用シングルページアプリです。インストール不要・アカウント不要。データは各端末のブラウザに自動保存されます（localStorage）。

## 主な機能
- ダッシュボード
  - 登録メンバー数表示
  - 準備度詳細（安全・装備・経験を加味した総合スコア）
- メンバー管理（追加・削除）
- 安全管理
  - 体調/睡眠/疲労の記録、履歴表示、リスク表示
- 装備チェック
  - 必須/推奨/季節のカテゴリ別チェック、総重量・進捗バー、テキスト出力
- 登山記録
  - 山リスト登録、登山ログの作成/一覧/削除
- 登頂計画
  - 予定日、山小屋、時刻ベースのスケジュール作成・出力
- 連続オートセーブ
  - 入力中のドラフトも保存・復元（フォーム値や選択状態）

## 技術構成
- 純粋な HTML / CSS / JavaScript（ES Modules）
- サーバ不要（静的ホスティングでOK）
- データ保存: localStorage（端末/ブラウザごとに独立）

## ファイル構成
- `index.html` … エントリポイント
- `styles.css` … スタイル
- `app.js` … 初期化とイベントバインディング
- `fujisanTeamManager.js` … アプリ本体（状態管理/レンダリング/保存）

## ローカル実行
1) ターミナルでプロジェクト直下へ移動
```bash
python3 -m http.server 8000
```
2) ブラウザで `http://localhost:8000/` を開く

- データはlocalStorageに自動保存され、再読み込み後も復元されます。

## データ仕様（重要）
- 本アプリはサーバを持たないため、各メンバーの端末間でデータは共有されません。
- チームで同じ状態を共有したい場合は、バックエンド（Supabase / Firebase / 簡易APIサーバなど）の導入が必要です。

## 準備度スコア（標準プロファイル）
- 重み: 安全 40% / 装備 35% / 経験 25%
- 安全: 直近3日間の 体調(50%)・疲労(30%/逆指標)・睡眠(20%) を正規化
  - レッドフラグ（体調≤2/疲労≥4/睡眠<5h）→ 安全上限60
  - 直近48hに安全ログなし → 総合上限80
- 装備: 必須(70%)・推奨(20%)・季節(10%)
  - クリティカル装備（登山靴/レイン上下/ヘッドランプ）欠如 → 装備上限40、総合上限60
- 経験: 経験レベル＋登山回数（逓減）＋高標高経験

## デプロイ（公開方法）
### 1) GitHub Pages（無料・公開）
1. GitHubにリポジトリを作成し、ソースをpush
2. リポジトリ Settings → Pages → Branch: `main` / `root` を選択
3. 発行URLをメンバーに共有

注意: 完全公開です。localStorageは利用者ブラウザに保存されます。

### 2) Vercel / Netlify / Cloudflare Pages（簡易）
- GitHub連携で自動デプロイ
- ビルドなし（静的）で公開可能
- 追加保護:
  - Vercel: MiddlewareでBasic認証
  - Cloudflare Pages: Cloudflare AccessでSSO保護

### 3) 一時共有（簡易トンネル）
- ローカル `python3 -m http.server 8000`
- `ngrok http 8000` などで外部URLを発行

## よくある質問
- Q. データをみんなで共有したい
  - A. 端末単位で保存されます。共有にはバックエンド導入が必要です。
- Q. パスワードで保護したい
  - A. VercelのMiddlewareやCloudflare Accessで可能です。

## ライセンス/利用範囲
- プライベート利用を想定。公開・配布する場合は必要に応じてライセンス表記を整備してください。

## 貢献
- Issue/PR歓迎。改善案（バックエンド同期、印刷レイアウト、iCal出力など）も歓迎します。
